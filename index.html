<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='utf-8'>
		<meta http-equiv='X-UA-Compatible' content='IE=edge'>
		<meta name='viewport' content='width=device-width, initial-scale=1.0'>
		<!-- The above 3 meta tags *must* come first in the head any other head content must come *after* these tags -->
		<title>Data visualization</title>
		<!-- Style -->
		<link rel='stylesheet' type='text/css' href='./style.css'>
		<link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<!-- Scripts -->
		<script src="https://d3js.org/d3.v4.js"></script>
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	</head>
	<body>
		<header class="header">
			<nav class="navbar navbar-expand-lg navbar-light bg-dark">
				<ul class="nav nav-pills" id="pills-tab" role="tablist">
					<li class="nav-item">
						<a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Change view</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Sign Up</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Log In</a>
					</li>
				</ul>
			</nav>
		</header>
		<main>
			<div class="container">
				<div id="title"></div>
			</div>
		</main>
		<footer class="bg-dark">
			<p>Created by Ryhor Sidoryn</p>
		</footer>

		<!-- Scripts -->
		<script>
			// set the dimensions and margins of the graph
			var margin = {top: 10, right: 30, bottom: 30, left: 40},
					width = 460 - margin.left - margin.right,
					height = 400 - margin.top - margin.bottom;
			
			// append the svg object to the body of the page
			var svg = d3.select("#title")
				.append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
				.append("g")
					.attr("transform",
								"translate(" + margin.left + "," + margin.top + ")");
			
			// get the data
			d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv", function(data) {
			
				// X axis: scale and draw:
				var x = d3.scaleLinear()
						.domain([0, 1000])     // can use this instead of 1000 to have the max of data: d3.max(data, function(d) { return +d.price })
						.range([0, width]);
				svg.append("g")
						.attr("transform", "translate(0," + height + ")")
						.call(d3.axisBottom(x));
			
				// set the parameters for the histogram
				var histogram = d3.histogram()
						.value(function(d) { return d.price; })   // I need to give the vector of value
						.domain(x.domain())  // then the domain of the graphic
						.thresholds(x.ticks(70)); // then the numbers of bins
			
				// And apply this function to data to get the bins
				var bins = histogram(data);
			
				// Y axis: scale and draw:
				var y = d3.scaleLinear()
						.range([height, 0]);
						y.domain([0, d3.max(bins, function(d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously
				svg.append("g")
						.call(d3.axisLeft(y));
			
				// append the bar rectangles to the svg element
				svg.selectAll("rect")
						.data(bins)
						.enter()
						.append("rect")
							.attr("x", 1)
							.attr("transform", function(d) { return "translate(" + x(d.x0) + "," + y(d.length) + ")"; })
							.attr("width", function(d) { return x(d.x1) - x(d.x0) -1 ; })
							.attr("height", function(d) { return height - y(d.length); })
							.style("fill", function(d){ if(d.x0<140){return "orange"} else {return "#69b3a2"}})
			
				// Append a vertical line to highlight the separation
				svg
					.append("line")
						.attr("x1", x(140) )
						.attr("x2", x(140) )
						.attr("y1", y(0))
						.attr("y2", y(1600))
						.attr("stroke", "grey")
						.attr("stroke-dasharray", "4")
				svg
					.append("text")
					.attr("x", x(190))
					.attr("y", y(1400))
					.text("threshold: 140")
					.style("font-size", "15px")
			});
			</script>
	</body>
</html>
